{% extends 'main/base.html' %}

{% block content %}
<div class="wrap">
    <h1>{{ news.title }}</h1>
    <p>üìÖ {{ news.date_created|date:"d.m.Y H:i" }}</p>

    {% if news.image %}
    <img src="{{ news.image.url }}" alt="{{ news.title }}" style="max-width: 100%;">
    {% endif %}

    <div style="margin: 30px 0; font-size: 18px; line-height: 1.6;">
        {{ news.content|linebreaks }}
    </div>

    <h3>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ({{ comments.count }})</h3>

    {% if user.is_authenticated %}
    <form method="post" action="{% url 'add_comment' news.pk %}">
        {% csrf_token %}
        <textarea name="text" placeholder="–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." rows="3" style="width: 100%; padding: 10px;"></textarea>
        <button type="submit" style="background: #EF0107; color: white; padding: 10px 20px; border: none; margin-top: 10px;">
            –û—Ç–ø—Ä–∞–≤–∏—Ç—å
        </button>
    </form>
    {% else %}
    <p>–ß—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, <a href="{% url 'login' %}">–≤–æ–π–¥–∏—Ç–µ</a> –∏–ª–∏ <a href="{% url 'signup' %}">–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a>.</p>
    {% endif %}

    <div style="margin-top: 30px;">
        {% for comment in comments %}
        <div style="border-bottom: 1px solid #ddd; padding: 15px 0;">
            <strong>{{ comment.author.username }}</strong>
            <small style="color: #666;">{{ comment.created_at|date:"d.m.Y H:i" }}</small>
            <p>{{ comment.text|linebreaks }}</p>
        </div>
        {% empty %}
        <p>–ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>
        {% endfor %}
    </div>
</div>
{% endblock %}