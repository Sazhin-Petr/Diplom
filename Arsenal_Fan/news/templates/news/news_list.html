{% extends 'main/base.html' %}
{% load static %}

{% block content %}
<div class="wrap">
    <div class="page-header">
        <h1>–í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏ –ê—Ä—Å–µ–Ω–∞–ª–∞</h1>
        <p class="page-subtitle">–ü–æ–ª–Ω—ã–π –∞—Ä—Ö–∏–≤ –Ω–æ–≤–æ—Å—Ç–µ–π —Ñ—É—Ç–±–æ–ª—å–Ω–æ–≥–æ –∫–ª—É–±–∞</p>
    </div>

    <div class="news-filters">
        <div class="filter-info">
            –í—Å–µ–≥–æ –Ω–æ–≤–æ—Å—Ç–µ–π: {{ news.paginator.count }}
        </div>
    </div>

    {% if news %}
    <div class="news-grid">
        {% for item in news %}
        <article class="news-card">
            {% if item.image %}
            <div class="news-image">
                <img src="{{ item.image.url }}" alt="{{ item.title }}">
            </div>
            {% else %}
            <div class="news-image placeholder">
                <div class="placeholder-text">Arsenal</div>
            </div>
            {% endif %}

            <div class="news-content">
                <div class="news-meta">
                    <span class="news-date">{{ item.date_created|date:"d.m.Y H:i" }}</span>
                    {% if not item.is_published %}
                    <span class="news-status draft">–ß–µ—Ä–Ω–æ–≤–∏–∫</span>
                    {% endif %}
                </div>

                <h2 class="news-title">
                    <a href="{% url 'news_detail' item.pk %}">{{ item.title }}</a>
                </h2>

                <p class="news-excerpt">
                    {{ item.content|truncatewords:50 }}
                </p>

                <div class="news-footer">
                    <a href="{% url 'news_detail' item.pk %}" class="read-more">
                        –ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é ‚Üí
                    </a>
                    <div class="news-stats">
                        <span class="comment-count">
                            üí¨ {{ item.comments.count }}
                        </span>
                    </div>
                </div>
            </div>
        </article>
        {% endfor %}
    </div>

    {% if news.has_other_pages %}
    <div class="pagination">
        <div class="pagination-info">
            –ü–æ–∫–∞–∑–∞–Ω–æ {{ news.start_index }}‚Äì{{ news.end_index }} –∏–∑ {{ news.paginator.count }} –Ω–æ–≤–æ—Å—Ç–µ–π
            (–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ news.number }} –∏–∑ {{ news.paginator.num_pages }})
        </div>

        <div class="pagination-links">
            {% if news.has_previous %}
                <a href="?page=1" class="page-link">¬´ –ü–µ—Ä–≤–∞—è</a>
                <a href="?page={{ news.previous_page_number }}" class="page-link">‚Äπ –ù–∞–∑–∞–¥</a>
            {% endif %}

            {% for num in news.paginator.page_range %}
                {% if num == news.number %}
                    <span class="page-link current">{{ num }}</span>
                {% elif num > news.number|add:'-3' and num < news.number|add:'3' %}
                    <a href="?page={{ num }}" class="page-link">{{ num }}</a>
                {% endif %}
            {% endfor %}

            {% if news.has_next %}
                <a href="?page={{ news.next_page_number }}" class="page-link">–í–ø–µ—Ä–µ–¥ ‚Ä∫</a>
                <a href="?page={{ news.paginator.num_pages }}" class="page-link">–ü–æ—Å–ª–µ–¥–Ω—è—è ¬ª</a>
            {% endif %}
        </div>
    </div>
    {% endif %}

    {% else %}
    <div class="no-news">
        <div class="no-news-icon">üì∞</div>
        <h3>–ù–æ–≤–æ—Å—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</h3>
        <p>–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏, —Å–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è —Å–≤–µ–∂–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –æ –∫–ª—É–±–µ!</p>
        <a href="{% url 'home' %}" class="btn-back">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
    {% endif %}
</div>
{% endblock %}